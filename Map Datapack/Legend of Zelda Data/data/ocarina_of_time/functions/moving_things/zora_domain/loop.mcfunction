#water Zoras
#Zora 1
execute unless entity @a[x=1773,y=19,z=2319,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2321,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2323,dx=0,dz=0] as @e[type=armor_stand,tag=Zora1] at @s unless entity @a[tag=Adult] run tp @s ~ 28 ~
execute unless entity @a[x=1773,y=19,z=2319,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2321,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2323,dx=0,dz=0] as @e[type=armor_stand,tag=Zora1] at @s unless entity @a[x=1740,y=27,z=2320,dx=4,dy=2,dz=5] run tp @s ~ 13 ~
#Zora 3
execute unless entity @a[x=1773,y=19,z=2319,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2321,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2323,dx=0,dz=0] as @e[type=armor_stand,tag=Zora3] at @s unless entity @a[tag=Adult] run tp @s ~ 28 ~
execute unless entity @a[x=1773,y=19,z=2319,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2321,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2323,dx=0,dz=0] as @e[type=armor_stand,tag=Zora3] at @s unless entity @a[x=1752,y=27,z=2323,dx=6,dy=2,dz=6] run tp @s ~ 18 ~
#Zora 4
execute unless entity @a[x=1773,y=19,z=2319,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2321,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2323,dx=0,dz=0] as @e[type=armor_stand,tag=Zora4] at @s unless entity @a[tag=Adult] run tp @s ~ 28 ~
execute unless entity @a[x=1773,y=19,z=2319,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2321,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2323,dx=0,dz=0] as @e[type=armor_stand,tag=Zora4] at @s unless entity @a[x=1762,y=27,z=2320,dx=6,dy=2,dz=6] run tp @s ~ 23 ~
#Zora 8
execute unless entity @a[x=1773,y=19,z=2319,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2321,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2323,dx=0,dz=0] as @e[type=armor_stand,tag=Zora8] at @s unless entity @a[tag=Adult] run tp @s ~ 28 ~
execute unless entity @a[x=1773,y=19,z=2319,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2321,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2323,dx=0,dz=0] as @e[type=armor_stand,tag=Zora8] at @s unless entity @a[x=1749,y=27,z=2314,dx=5,dy=2,dz=5] run tp @s ~ 13 ~

#King Zora
execute as @e[type=armor_stand,tag=FakeKingZora] at @s if entity @a[x=1773,y=57,z=2293,dx=2,dz=1] run tp @s ~ 57 ~
execute as @e[type=armor_stand,tag=FakeKingZora] at @s unless entity @a[x=1773,y=57,z=2293,dx=2,dz=1] run tp @s ~ 52 ~

execute if entity @a[x=1773,y=57,z=2293,dx=2,dz=1,nbt={Inventory:[{tag:{BottleLetter:1b}}]}] run tag @a add MeetKingZora
execute if entity @a[tag=MeetKingZora] run scoreboard players set @e[type=armor_stand,tag=FakeKingZora,limit=1] text 0

#Domain New Text
execute unless entity @a[x=1773,y=19,z=2319,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2321,dx=0,dz=0] unless entity @a[x=1773,y=19,z=2323,dx=0,dz=0] if entity @a[tag=DomainChanges] run function ocarina_of_time:moving_things/zora_domain/new_text

#Fish
execute if entity @a[tag=ResetCod] run function ocarina_of_time:moving_things/zora_domain/fish

#Fish Reset
execute as @e[type=cod,tag=DomainCod] positioned 1783 28 2322 unless entity @s[distance=..5] run tp @s 1783 28 2322

#Waterfall
execute if entity @a[x=1753,y=30,z=2309,dx=4,dz=0] at @a run tp @a ~ ~ ~1
execute if entity @a[x=1771,y=53,z=2288,dx=6,dy=4,dz=0] at @a run tp @a ~ ~ ~1

#Secret
execute if block 1770 34 2315 minecraft:stone_button[powered=true] unless block 1771 29 2307 minecraft:gold_block run give @p player_head{display:{Name:"{\"text\":\"Princess Ruto\"}"},SkullOwner:{Id:[I;-2058996143,-1247198165,-2051983518,1198816817],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOTQzZjQ3NjgyMDM1ZGNiODZlMzNiYTViNGU5YWJlZWM4YjJjZmRmN2E3ZTg1ZTJiNzMzMzBkODhmYzk0ZjljIn19fQ=="}]}},SecretMask:1b}
execute if block 1770 34 2315 minecraft:stone_button[powered=true] run fill 1771 29 2307 1771 29 2307 minecraft:gold_block

#Waterfall Minigame
execute if entity @a[nbt={Inventory:[{tag:{DivingGame:1b}}]}] run tag @a add DivingGame
execute if entity @a[nbt={Inventory:[{tag:{DivingGame:1b}}]}] run scoreboard players set @a MiniGameTime 351
execute if entity @a[nbt={Inventory:[{tag:{DivingGame:1b}}]}] run clear @a minecraft:paper
execute as @e[type=armor_stand,tag=Zora7] if entity @a[tag=DivingGame] unless entity @a[tag=DivingTutorial] run function ocarina_of_time:moving_things/zora_domain/diving_game
execute unless entity @a[tag=DivingGame] run scoreboard players set @a MiniGameTime 0

#Torches
execute if entity @e[type=armor_stand,tag=LitTorch,x=1753,y=29,z=2305,dx=0,dz=0] if entity @e[type=armor_stand,tag=LitTorch,x=1757,y=29,z=2305,dx=0,dz=0] unless block 1755 29 2305 minecraft:chest run clone 1755 29 2300 1755 29 2300 1755 29 2305

#Adult/Child
execute if entity @a[tag=Adult] run function ocarina_of_time:moving_things/zora_domain/adult
execute unless entity @a[tag=Adult] run function ocarina_of_time:moving_things/zora_domain/child

#Shop
execute as @e[type=item,x=1773,y=16,z=2343,dx=2,dy=1,dz=0] run tp @s 1774 15 2346

execute if entity @e[type=marker,tag=Progress,tag=FairyBow] if entity @a[tag=Adult] run data merge entity @e[type=villager,tag=DomainShop,limit=1] {Tags:["DomainShop","Invisible"],PersistenceRequired:1,Invulnerable:1,Silent:1,NoAI:1,Offers:{Recipes:[{buy:{id:lapis_lazuli,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},buyB:{id:glass_bottle,Count:1,tag:{display:{Name:"\"Bottle\""}}},sell:{id:"carrot_on_a_stick",Count:1,tag:{display:{Name:"{\"text\":\"Red Potion\"}"},Unbreakable:1b,Damage:20,HideFlags:63,RedPotion:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:lapis_lazuli,Count:18,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (50)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup50:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:red_dye,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Red Rupee\"}"}}},buyB:{id:glass_bottle,Count:1,tag:{display:{Name:"\"Bottle\""}}},sell:{id:carrot_on_a_stick,Count:1,tag:{display:{Name:"{\"text\":\"Fish\"}"},Unbreakable:1b,Damage:3,HideFlags:63,BottledFish:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:lime_dye,Count:15,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:carrot_on_a_stick,Count:1,tag:{Unbreakable:1b,Damage:17,HideFlags:63,NutPickup:1b,PickupItem:1b,display:{Name:"\"Deku Nuts (5)\""}}},rewardExp:0b,maxUses:9999999},{buy:{id:lime_dye,Count:20,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (30)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup30:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:lapis_lazuli,Count:12,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (30)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup30:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:red_dye,Count:15,tag:{Item:1b,display:{Name:"{\"text\":\"Red Rupee\"}"}}},sell:{id:leather_chestplate,Count:1,tag:{display:{color:1521151,Name:"{\"text\":\"Zora Tunic\"}"},Unbreakable:1b,ZoraTunic:1b,HideFlags:46}},rewardExp:0b,maxUses:9999999},{buy:{id:lime_dye,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:shears,Count:1,tag:{Unbreakable:1b,Damage:11,HideFlags:63,Heart:1b,PickupItem:1b,display:{Name:"\"Heart\""}}},rewardExp:0b,maxUses:9999999}]}}
execute if entity @e[type=marker,tag=Progress,tag=FairyBow] unless entity @a[tag=Adult] run data merge entity @e[type=villager,tag=DomainShop,limit=1] {Tags:["DomainShop","Invisible"],PersistenceRequired:1,Invulnerable:1,Silent:1,NoAI:1,Offers:{Recipes:[{buy:{id:lapis_lazuli,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},buyB:{id:glass_bottle,Count:1,tag:{display:{Name:"\"Bottle\""}}},sell:{id:"carrot_on_a_stick",Count:1,tag:{display:{Name:"{\"text\":\"Red Potion\"}"},Unbreakable:1b,Damage:20,HideFlags:63,RedPotion:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:lapis_lazuli,Count:18,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (50)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup50:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:red_dye,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Red Rupee\"}"}}},buyB:{id:glass_bottle,Count:1,tag:{display:{Name:"\"Bottle\""}}},sell:{id:carrot_on_a_stick,Count:1,tag:{display:{Name:"{\"text\":\"Fish\"}"},Unbreakable:1b,Damage:3,HideFlags:63,BottledFish:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:lime_dye,Count:15,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:carrot_on_a_stick,Count:1,tag:{Unbreakable:1b,Damage:17,HideFlags:63,NutPickup:1b,PickupItem:1b,display:{Name:"\"Deku Nuts (5)\""}}},rewardExp:0b,maxUses:9999999},{buy:{id:lime_dye,Count:20,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (30)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup30:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:lapis_lazuli,Count:12,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (30)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup30:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:red_dye,Count:15,tag:{Item:1b,display:{Name:"{\"text\":\"Red Rupee\"}"}}},sell:{id:leather_chestplate,Count:1,tag:{display:{color:1521151,Name:"{\"text\":\"Zora Tunic\"}"},Unbreakable:1b,ZoraTunic:1b,HideFlags:46}},rewardExp:0b,maxUses:0},{buy:{id:lime_dye,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:shears,Count:1,tag:{Unbreakable:1b,Damage:11,HideFlags:63,Heart:1b,PickupItem:1b,display:{Name:"\"Heart\""}}},rewardExp:0b,maxUses:9999999}]}}
execute unless entity @e[type=marker,tag=Progress,tag=FairyBow] if entity @a[tag=Adult] run data merge entity @e[type=villager,tag=DomainShop,limit=1] {Tags:["DomainShop","Invisible"],PersistenceRequired:1,Invulnerable:1,Silent:1,NoAI:1,Offers:{Recipes:[{buy:{id:lapis_lazuli,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},buyB:{id:glass_bottle,Count:1,tag:{display:{Name:"\"Bottle\""}}},sell:{id:"carrot_on_a_stick",Count:1,tag:{display:{Name:"{\"text\":\"Red Potion\"}"},Unbreakable:1b,Damage:20,HideFlags:63,RedPotion:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:lapis_lazuli,Count:18,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (50)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup50:1b}},rewardExp:0b,maxUses:0},{buy:{id:red_dye,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Red Rupee\"}"}}},buyB:{id:glass_bottle,Count:1,tag:{display:{Name:"\"Bottle\""}}},sell:{id:carrot_on_a_stick,Count:1,tag:{display:{Name:"{\"text\":\"Fish\"}"},Unbreakable:1b,Damage:3,HideFlags:63,BottledFish:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:lime_dye,Count:15,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:carrot_on_a_stick,Count:1,tag:{Unbreakable:1b,Damage:17,HideFlags:63,NutPickup:1b,PickupItem:1b,display:{Name:"\"Deku Nuts (5)\""}}},rewardExp:0b,maxUses:9999999},{buy:{id:lime_dye,Count:20,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (30)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup30:1b}},rewardExp:0b,maxUses:0},{buy:{id:lapis_lazuli,Count:12,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (30)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup30:1b}},rewardExp:0b,maxUses:0},{buy:{id:red_dye,Count:15,tag:{Item:1b,display:{Name:"{\"text\":\"Red Rupee\"}"}}},sell:{id:leather_chestplate,Count:1,tag:{display:{color:1521151,Name:"{\"text\":\"Zora Tunic\"}"},Unbreakable:1b,ZoraTunic:1b,HideFlags:46}},rewardExp:0b,maxUses:9999999},{buy:{id:lime_dye,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:shears,Count:1,tag:{Unbreakable:1b,Damage:11,HideFlags:63,Heart:1b,PickupItem:1b,display:{Name:"\"Heart\""}}},rewardExp:0b,maxUses:9999999}]}}
execute unless entity @e[type=marker,tag=Progress,tag=FairyBow] unless entity @a[tag=Adult] run data merge entity @e[type=villager,tag=DomainShop,limit=1] {Tags:["DomainShop","Invisible"],PersistenceRequired:1,Invulnerable:1,Silent:1,NoAI:1,Offers:{Recipes:[{buy:{id:lapis_lazuli,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},buyB:{id:glass_bottle,Count:1,tag:{display:{Name:"\"Bottle\""}}},sell:{id:"carrot_on_a_stick",Count:1,tag:{display:{Name:"{\"text\":\"Red Potion\"}"},Unbreakable:1b,Damage:20,HideFlags:63,RedPotion:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:lapis_lazuli,Count:18,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (50)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup50:1b}},rewardExp:0b,maxUses:0},{buy:{id:red_dye,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Red Rupee\"}"}}},buyB:{id:glass_bottle,Count:1,tag:{display:{Name:"\"Bottle\""}}},sell:{id:carrot_on_a_stick,Count:1,tag:{display:{Name:"{\"text\":\"Fish\"}"},Unbreakable:1b,Damage:3,HideFlags:63,BottledFish:1b}},rewardExp:0b,maxUses:9999999},{buy:{id:lime_dye,Count:15,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:carrot_on_a_stick,Count:1,tag:{Unbreakable:1b,Damage:17,HideFlags:63,NutPickup:1b,PickupItem:1b,display:{Name:"\"Deku Nuts (5)\""}}},rewardExp:0b,maxUses:9999999},{buy:{id:lime_dye,Count:20,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (30)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup30:1b}},rewardExp:0b,maxUses:0},{buy:{id:lapis_lazuli,Count:12,tag:{Item:1b,display:{Name:"{\"text\":\"Blue Rupee\"}"}}},sell:{id:shears,Count:1,tag:{display:{Name:"{\"text\":\"Arrows (30)\"}"},Unbreakable:1b,Damage:20,Item:1b,ArrowPickup:1b,PickupItem:1b,ArrowPickup30:1b}},rewardExp:0b,maxUses:0},{buy:{id:red_dye,Count:15,tag:{Item:1b,display:{Name:"{\"text\":\"Red Rupee\"}"}}},sell:{id:leather_chestplate,Count:1,tag:{display:{color:1521151,Name:"{\"text\":\"Zora Tunic\"}"},Unbreakable:1b,ZoraTunic:1b,HideFlags:46}},rewardExp:0b,maxUses:0},{buy:{id:lime_dye,Count:10,tag:{Item:1b,display:{Name:"{\"text\":\"Green Rupee\"}"}}},sell:{id:shears,Count:1,tag:{Unbreakable:1b,Damage:11,HideFlags:63,Heart:1b,PickupItem:1b,display:{Name:"\"Heart\""}}},rewardExp:0b,maxUses:9999999}]}}

#Pots
execute as @e[type=marker,tag=Pots] run function ocarina_of_time:moving_things/zora_domain/pots

#Grotto
execute if entity @a[x=1744,y=30,z=2318,dx=6,dz=6] if entity @a[nbt={Inventory:[{id:"minecraft:music_disc_stal",Count:1b}]}] run fill 1746 28 2320 1746 28 2320 minecraft:air
execute if entity @a[tag=ShardAgony,x=1744,y=30,z=2318,dx=6,dz=6] run tag @a add ShardAgonyStart
execute unless entity @a[tag=ShardAgony,x=1744,y=30,z=2318,dx=6,dz=6] run tag @a remove ShardAgonyStart
